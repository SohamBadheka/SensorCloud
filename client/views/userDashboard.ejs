<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>User - Dashboard</title>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" >
	<link href="css/datepicker3.css" rel="stylesheet">
	<link href="css/styles.css" rel="stylesheet">

	<!--Icons-->

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<script src="http://code.angularjs.org/1.3.15/angular.js"></script>
	<script src="angular/userDashboard.js"></script>

	<script src="javascripts/respond.min.js"></script>
	<script>

		$(document).ready(function () {

			$('.analysis').hide();
			$('.billing').hide();
			$('.dashboard').show();
			$('.map').hide();


			$(".click0").on("click", function(){

				$('.dashboard').show();
				$('.analysis').hide();
				$('.billing').hide();
				$('.map').hide();

			})

			$(".click1").on("click", function () {
				$('.analysis').hide();
				$('.billing').hide();
				$('.dashboard').hide();
				$('.map').show();
			})

			$(".click2").on("click", function () {
				$('.analysis').show();
				$('.billing').hide();
				$('.dashboard').hide();
				$('.map').hide();
			})
			$(".click3").on("click", function () {
				$('.analysis').hide();
				$('.billing').show();
				$('.dashboard').hide();
				$('.map').hide();
			})
		});
	</script>


</head>

<body ng-app="listActiveSensors">

<style>
	.switch-wrapper {
		display: inline-block;
		position: relative;
		top: 3px;
	}
</style>

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#sidebar-collapse">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="#"><span>User</span>Dashboard</a>

		</div>

	</div><!-- /.container-fluid -->
</nav>

<div id="sidebar-collapse" class="col-sm-3 col-lg-2 sidebar">
	<form role="search">
		<div class="form-group">
			<input type="text" class="form-control" placeholder="Search">
		</div>
	</form>
	<ul class="nav menu">
		<li><a href="javascript:void(0)" class="click0">Dashboard</a></li>
		<li><a href="javascript:void(0)" class="click1">Map</a></li>
		<li><a href="javascript:void(0)" class="click2">Analysis</a></li>
		<li><a href="javascript:void(0)" class="click3">Biling</a></li>

	</ul>


</div><!--/.sidebar-->

<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">

	<div class="row">
		<ol class="breadcrumb">
			<li><a href="#"><svg class="glyph stroked home"><use xlink:href="#stroked-home"></use></svg></a></li>
			<li class="active">Icons</li>
		</ol>
	</div><!--/.row-->

	<div class="row">
		<div class="col-lg-12">
			<h1 class="page-header">Dashboard</h1>
		</div>
	</div><!--/.row-->

	<div class="dashboard">

		<div class="row">
			<a href="javascript:void(0);" data-toggle="modal" data-target="#mySensors">
				<div class="col-xs-12 col-md-6 col-lg-3">
					<div class="panel panel-orange panel-widget">
						<div class="row no-padding">
							<div class="col-sm-3 col-lg-5 widget-left">
								<svg class="glyph stroked empty-message"><use xlink:href="#stroked-empty-message"></use></svg>
							</div>
							<div class="col-sm-9 col-lg-7 widget-right">
								<div class="large">My</div>
								<div style="font-size: medium;">Sensors</div>
							</div>
						</div>
					</div>
				</div>
			</a>
			<div class="modal fade" id="mySensors" role="dialog" ng-controller="mySensors">
				<!-- Modal content-->
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title">My subscribed sensor details : </h4>
						</div>
						<div class="modal-body">
							<table class="table">
								<thead class="thead-inverse">
								<tr>
									<th>#</th>
									<th>Name</th>
									<th>Type</th>
									<th>Status</th>

								</tr>
								</thead>
								<tbody>
								<tr ng-repeat="k in mySensors">
									<td>{{$index+1}}</td>
									<td>{{k.name}}</td>
									<td>{{k.type}}</td>
									<td><button class="btn btn-primary" ng-click="unsubscribe(k.name)">Unsubscribe</button></td>
								</tbody>
							</table>

						</div>

					</div>
				</div>
			</div>


			<a href="javascript:void(0);" data-toggle="modal" data-target="#subscribeSensors">
				<div class="col-xs-12 col-md-6 col-lg-3">
					<div class="panel panel-teal panel-widget">
						<div class="row no-padding">
							<div class="col-sm-3 col-lg-5 widget-left">
								<svg class="glyph stroked male-user"><use xlink:href="#stroked-male-user"></use></svg>
							</div>
							<div class="col-sm-9 col-lg-7 widget-right">
								<div class="large">Subsribe</div>
								<div style="font-size: medium;">sensors</div>
							</div>
						</div>
					</div>
				</div>
			</a>

			<div class="modal fade" id="subscribeSensors" role="dialog" ng-controller="listActiveSensors">
				<!-- Modal content-->
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title">Subscribe the sensors from the list: </h4>
						</div>
						<div class="modal-body">
							<table class="table">
								<thead class="thead-inverse">
								<tr>
									<th>#</th>
									<th>Name</th>
									<th>Type</th>
									<th>Owner</th>
									<th>City</th>
									<th>State</th>
									<th>Subscribe</th>

								</tr>
								</thead>
								<tbody>
								<tr ng-repeat = "k in sensors">
									<th scope="row">{{$index+1}}</th>
									<td>{{k.name}}</td>
									<td>{{k.type}}</td>
									<td>{{k.owner}}</td>
									<td>{{k.city}}</td>
									<td>{{k.state}}</td>
									<td><button class="btn btn-primary" ng-click="subscribe(k.name);">Subscribe</button></td>
								</tr>


								</tbody>
							</table>

						</div>

					</div>
				</div>
			</div>


		</div><!--/.row-->
	</div>

	<div class="map">

		<p>map</p>
	</div>
	<div class="analysis" ng-controller="analysis">

		<table class="table">
			<thead class="thead-inverse">
			<tr>
				<th>#</th>
				<th>Name</th>
				<th>Type</th>
				<th>city</th>
				<th>Your Action</th>


			</tr>
			</thead>

			<tbody>
			<tr ng-repeat="k in sensors">
				<td>{{$index+1}}</td>
				<td>{{k.name}}</td>
				<td>{{k.type}}</td>
				<td>{{k.city}}</td>
				<td><button class="btn btn-success" ng-click="getCurrentData(k.type,k.city);">Current Data</button><button style="margin-left:5px;" class="btn btn-success" ng-click="getForecastData(k.type,k.city);">Forecast</button></td>
			<tr>
			</tbody>
		</table>



		<div ng-show="currentData">
			<h1>Details :</h1><hr>
			<h2 style="margin-left:5px;">Current statistics for weather data !</h2>

			<p>Weather : {{weather}}</p>
			<p>Temp : {{temp}}</p>
			<p>Min temp : {{minTemp}}</p>
			<p>Max temp : {{maxTemp}}</p>
			<p>Pressure : {{pressure}}</p>
			<p>Humidity : {{humidity}}</p>
		</div>


		<div class="row" ng-show="forecastData">

			<h1>Details :</h1><hr>
			<h2 style="margin-left:5px;">Weather forecast report for next 5 days !</h2>
			<hr>
			<div class="col-sm-4 col-lg-4 col-md-4" ng-repeat="k in forecastData">
				<div class="thumbnail">

					<div class="caption">

						<p>Time : {{k.dt_txt}}</p>
						<p>Weather : {{k.weather[0].main}} </p>
						<p>Temp : {{k.main.temp}}</p>

						<p>Pressure : {{k.main.pressure}}</p>
						<p>Humidity : {{k.main.humidity}}</p>


					</div>

				</div>
			</div>
		</div>


	</div>

	<div class="billing" ng-controller = "myBills">
		<table class="table">
			<thead class="thead-inverse">
			<tr>
				<th>#</th>
				<th>Name</th>
				<th>From</th>
				<th>To</th>
				<th>Amount</th>
				<th>Action</th>

			</tr>
			</thead>
			<tbody>
			<tr ng-repeat = "k in bills">
				<td>{{$index+1}}</td>
				<td>{{k.sensor}}</td>
				<td>{{k.from}}</td>
				<td>{{k.to}}</td>
				<td>{{k.amount}}</td>

				<td><button class="btn btn-primary" ng-click="subscribe(k.name);">Pay</button></td>
			</tr>


			</tbody>
		</table>

	</div>
</div>
</body>

</html>
